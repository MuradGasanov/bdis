{% extends "base.html" %}
{% load static from staticfiles %}
{% block title %}БД интеллектуальной собственности{% endblock %}
{% block style %}
    <link rel="stylesheet" href="{% static "css/main.css" %}" >
{% endblock %}
{% block script %}
    <script src="{% static "js/kendo/kendo.web.min.js" %}"></script>
    <script src="{% static "js/kendo/cultures/kendo.culture.ru-RU.min.js" %}"></script>
    <script src="{% static "js/main.js" %}"></script>
    <script src="{% static "js/noty/layouts/center.js" %}"></script>
{% endblock %}
{% block header %}
    <a class="logout k-button" href="/logout"><i class="fa fa-sign-out"></i> Выход</a>
{% endblock %}
{% block content %}
    <div class="section search_section">
        <div id="search_textbox">
            <input id="search" style="width: 100%"/>
{#            <ul id="search_param">#}
{#                <li><input type="checkbox" id="search_name" name="search_name"/><label for="search_name">По названию</label></li>#}
{#                <li><input type="checkbox" id="search_author" name="search_author"/><label for="search_author">По автору</label></li>#}
{#                <li><input type="checkbox" id="search_tag" name="search_tag"/><label for="search_tag">По ключевым словам</label></li>#}
{#            </ul>#}
        </div>
        <div id="search_tree"></div>
    </div>
    <div class="section result_section">
        <div id="result"></div>
    </div>

    <script type="text/x-kendo-tmpl" id="tree_item_template">
        #if (item.type == "subdivision") {#
            <span >
                # item.expanded = true; #
                <span data-id="#=item.subdivision_id#" data-type="#=item.type#" title="#=item.name#" class="">
                    <i class="fa fa-building-o"> </i> #=item.name#
                </span>
            </span>
        #} else if (item.type == "department") {#
            <span >
                <span data-id="#=item.department_id#" data-type="#=item.type#" title="#=item.name#" class="">
                    <i class="fa fa-users"> </i> #=item.name#
                </span>
            </span>
        #} else {#
            <span >
                <span data-id="#=item.author_id#" data-type="#=item.type#" title="#=[item.surname,item.name,item.patronymic].join(' ')#" class="">
                    <i class="fa fa-user"> </i> #=[item.surname,item.name,item.patronymic].join(' ')#
                </span>
            </span>
        #} #
    </script>

    <script type="text/x-kendo-template" id="result_item_template">
        <div class="intellectual_property_item section" data-id="#=intellectual_property_id#">
            <h1>#=name#</h1>
            <p>#=doc_type.name#</p>
            <p>#=direction.name#</p>
            #var fio=[];console.log(authors);for(var i=0;i<authors.length;i++){fio.push(authors[i].name);}#
            <p>#=fio.join(", ")#</p>
            #var tag=[];for(var i=0;i<tags.length;i++){tag.push(tags[i].name);}#
            <p>#=tag.join(", ")#</p>
        </div>
    </script>
{% endblock %}